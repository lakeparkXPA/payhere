# 설계
## 회원 가입, 로그인 및 로그아웃 
### (Register, Login, Logout, TokenRefresh)
회원 가입은 이메일은 기가입 여부를 판단하고 비밀번호는 잘못입력하는 것을 방지하기 위해 동일 비밀번호 2번 입력으로 생성했다.
로그인은 회원 가입 정보를 입력하면 access 토큰을 json 으로 return 하고 refresh 토큰의 경우 cookie 로 설정했다.
로그아웃은 간단히 갖고 있는 refresh 토큰을 쿠키에서 제거했다.

## 가계부 기능들 
### (Book(get, post, put, delete) , abook_detail, abook_detail, abook_detail_duplicate) 
로그인 후 첫 화면을 해당 아이디로 이제까지 기록한 가계부 리스트를 불러와서 보여주는 것으로 생각했다. 리스트 중 하나를 클릭하면 해당 이력의 세부 내역을 보여주는 화면으로 전환. 가계부 내역 수정, 복제, 삭제 기능은 리스트 화면에서 해당 이력에 대해 수정, 복제, 삭제 요청을 하거나 세부 내역 화면에서 수정, 복제, 삭제를 요청할 수 있는 것으로 생각했다.
Abook 은 Account book 을 축약한 것이다.

## 가계부 내역 공유
### (abook_share, abook_detail_share)
pyshorteners 패키지를 사용하여 단축 url 을 구현. 패키지 내에서 특정 시간 뒤 만료 된다고 나와 있고 공식 github [예제](https://github.com/ellisonleao/pyshorteners/blob/main/example.py) 와 같은 식으로 했지만 해당 url 이 시간이 지남에 따라 만료가 되지 않음. 자체적으로 해당 url 을 만들었을 때 db에 만료시간을 설정하고 url에서 error 을 발생시켜서 접근을 막을 수는 있다. 
처음에는 단축 url 의 원본 url 에 abook 의 id 를 보내고 abook_detail_share 에서 해당 id 에 대한 데이터를 가져오는 식으로 구현했지만 아무런 인증 없이 id 를 넣어서 값을 반환하는 것은 보안에 좋지 않다고 생각이 들었다. 그래서 url 생성 기능에 금액이랑 메모 정보를 넣어서 단축url 생성했다. abook_detail_share 는 단순히 json 형태로 return 만 해준다.

# 코드에 대한 생각
## 테스트
테스트 코드를 처음으로 작성해보는 것이어서 찾아보면서 작성을 시작했다. 예전에는 swagger 혹은 insomnia 를 사용해서 테스트를 했었는데 테스트 코드를 사용하면서 훨씬 좋다는 것을 느꼈다. 일단 DB 에 직접 접근하지 않고 가상의 DB 를 생성해서 사용해서 편리했다. 그리고 예전에는 테스트를 진행하면서 적어두긴 했지만 체계적으로 테스트 진행이 어려웠는데 기능별 여러 시나리오 테스트를 통하니 일을 두번하거나 누락되는 일이 거의 없었다.

## swagger
문서화와 테스트를 위해 swagger 를 사용하고 있지만 아직까지는 문서화에서 조금 더 보완할 점이 있는 것 같다. 기능에 대한 설명을 조금 더 쉽고 직관적이고 자세하게 할 수 있도록 더 노력이 필요하다.
